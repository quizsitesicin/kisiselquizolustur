<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Benim Quizim</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #f5d6e6, #d7e0f6);
      margin: 0; padding: 20px;
      color: #333;
    }
    h2 { color: #7e1e6c; }
    .hidden { display: none; }
    input, button, select {
      padding: 10px;
      margin: 5px 0;
      width: 100%;
      max-width: 500px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    button {
      background: #7e1e6c;
      color: white;
      cursor: pointer;
    }
    .quiz-box, .start-box, .result-box, .solve-box {
      max-width: 600px; margin: auto;
    }
    .question-block { margin-bottom: 15px; }
    .share-buttons button {
      background-color: #25D366;
      margin: 5px 0;
    }
    .insta {
      font-size: 16px;
      font-weight: bold;
      background: linear-gradient(to right, #feda75, #d62976, #962fbf, #4f5bd5);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-top: 30px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="start-box">
    <h2>Quiz Oluştur</h2>
    <input type="text" id="creatorName" placeholder="Instagram kullanıcı adın" />
    <button onclick="createQuiz()">Quiz Oluştur</button>
  </div>

  <div class="quiz-box hidden">
    <h2>Sorularını Gir</h2>
    <div id="questionsArea"></div>
    <button onclick="submitQuiz()">Quizi Kaydet</button>
  </div>

  <div class="solve-box hidden">
    <h2>Arkadaşın Quizi</h2>
    <input type="text" id="solverName" placeholder="Adın" />
    <div id="solveArea"></div>
    <button onclick="submitAnswers()">Bitir</button>
  </div>

  <div class="result-box hidden">
    <h2>Sonuçlar</h2>
    <div id="resultText"></div>
    <div class="share-buttons">
      <button onclick="shareWhatsApp()">WhatsApp’ta Paylaş</button>
      <button onclick="shareInstagram()">Instagram’da Paylaş</button>
    </div>
  </div>

  <div class="insta">@<span id="instaName"></span></div>

  <script>
    let quizData = { questions: [], answers: [], creator: "" };

    function createQuiz() {
      const name = document.getElementById("creatorName").value;
      if (!name) return alert("Kullanıcı adını gir");
      quizData.creator = name;
      document.querySelector(".start-box").classList.add("hidden");
      document.querySelector(".quiz-box").classList.remove("hidden");

      let html = "";
      for (let i = 1; i <= 10; i++) {
        html += `
          <div class="question-block">
            <input placeholder="Soru ${i}" id="q${i}" />
            <select id="a${i}">
              <option value="">Doğru Şıkkı Seç</option>
              <option>A</option><option>B</option><option>C</option><option>D</option>
            </select>
          </div>`;
      }
      document.getElementById("questionsArea").innerHTML = html;
    }

    function submitQuiz() {
      for (let i = 1; i <= 10; i++) {
        const q = document.getElementById(`q${i}`).value;
        const a = document.getElementById(`a${i}`).value;
        if (!q || !a) return alert("Tüm soruları doldur");
        quizData.questions.push({ q, options: ["A", "B", "C", "D"] });
        quizData.answers.push(a);
      }

      const params = new URLSearchParams();
      params.set("creator", quizData.creator);
      params.set("data", JSON.stringify(quizData));

      const link = `${location.origin}${location.pathname}?${params.toString()}`;
      prompt("Arkadaşlarınla paylaş:", link);
    }

    function loadQuizFromURL() {
      const url = new URL(location.href);
      const data = url.searchParams.get("data");
      const creator = url.searchParams.get("creator");
      if (!data) return;

      quizData = JSON.parse(data);
      document.querySelector(".solve-box").classList.remove("hidden");
      document.getElementById("instaName").textContent = creator;

      let html = "";
      quizData.questions.forEach((item, index) => {
        html += `
          <div class="question-block">
            <p>${item.q}</p>
            <select id="solve${index}">
              <option value="">Cevabını Seç</option>
              <option>A</option><option>B</option><option>C</option><option>D</option>
            </select>
          </div>`;
      });
      document.getElementById("solveArea").innerHTML = html;
    }

    function submitAnswers() {
      const name = document.getElementById("solverName").value;
      if (!name) return alert("Adını yaz");
      let score = 0;
      quizData.answers.forEach((ans, i) => {
        const userAns = document.getElementById(`solve${i}`).value;
        if (ans === userAns) score++;
      });

      document.querySelector(".solve-box").classList.add("hidden");
      document.querySelector(".result-box").classList.remove("hidden");
      document.getElementById("resultText").textContent = `${name}, ${quizData.creator} adlı kişinin quizinde ${score}/10 doğru yaptın.`;
    }

    function shareWhatsApp() {
      const msg = document.getElementById("resultText").textContent;
      const url = encodeURIComponent(location.href);
      window.open(`https://wa.me/?text=${msg}%0A${url}`);
    }

    function shareInstagram() {
      alert("Sonucu ekran görüntüsü alarak Instagram hikayende paylaşabilirsin.");
    }

 // window.onload = loadQuizFromURL;
  </script>
</body>
</html>
